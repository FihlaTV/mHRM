<div class="col-xs-12 btn-edition">
  <%= link_to t('button_cancel'), checklist_templates_path, class: 'btn btn-warning pull-right' %>
  <%= link_to t('button_print'), checklist_template_path(@checklist, format: 'pdf'), class: 'btn btn-primary pull-right' %>
  <%= link_to 'New note' , new_note_checklist_template_path(@checklist), class: 'btn btn-primary pull-right' %>
</div>
<fieldset>
  <% checklist = @checklist %>
  <legend>Checklist Templates</legend>
  <%= simple_form_for(checklist, url: save_checklist_template_path, html: { class: 'form-horizontal' }) do |f| %>
      <% data = checklist
         if data.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(data.errors.count, "error") %> :</h2>

            <ul>
              <% data.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
              <% end %>
            </ul>
          </div>
      <% end %>
      <%= f.hidden_field :user_id %>

      <div>
        <p>
          <strong>Title:</strong>
          <%=  @checklist.title %>
        </p>

        <p>
          <strong>Description:</strong>
          <%=  @checklist.description.html_safe %>
        </p>
        <p>
          <strong>Type:</strong>
          <%=  @checklist.checklist_type %>
        </p>
      </div>

      <div id='checklists' >
        <% f.object.checklists.each_with_index do |checklist, index| %>
            <%= render 'checklist_fill_fields', :checklist => checklist, index: index, checklist_template_id: f.object.id %>
        <% end %>
      </div>

      <div class="form-group margin-top-10" >
        <div class="col-md-11">
          <%= link_to t('button_cancel'), checklist_templates_path, class: 'btn btn-warning pull-right' %>
          <%= f.submit t('button_save'), class: 'btn btn-primary pull-right' %>
        </div>
      </div>
  <% end %>
</fieldset>
<% notes = checklist.notes(User.current.id) %>
<% if notes.any? %>
    <section id="widget-grid" class="form_note_list">
      <div class="row">
        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <%= render partial: 'notes/notes',
                     layout: 'shared/smart_widget_wrapper',
                     locals: {
                         notes: checklist.notes(User.current.id),
                         wid_id: 'note_lists',
                         wid_title: 'Notes'
                     } %>
        </article>
      </div>
    </section>

<% end %>
